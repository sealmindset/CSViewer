{"ast":null,"code":"// utils.js\nexport function flattenJSON(jsonData, propertiesKey = \"PROPERTIES\") {\n  const flattenedData = [];\n  function flattenObject(obj, prefix = \"\") {\n    for (const key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        const value = obj[key];\n        if (typeof value === \"object\" && value !== null && !Array.isArray(value)) {\n          flattenObject(value, prefix + key + \"_\"); // Use underscore as the separator\n        } else if (Array.isArray(value)) {\n          // Handle arrays\n          value.forEach((item, index) => {\n            if (typeof item === \"object\" && item !== null) {\n              flattenObject(item, `${prefix}${key}[${index}]_`);\n            } else {\n              const newKey = `${prefix}${key}[${index}]`;\n              flattenedData.push({\n                [newKey]: item\n              });\n            }\n          });\n        } else {\n          const newKey = prefix + key;\n          flattenedData.push({\n            [newKey]: value\n          });\n        }\n      }\n    }\n  }\n  if (Array.isArray(jsonData)) {\n    jsonData.forEach(item => {\n      if (item.hasOwnProperty(propertiesKey) && typeof item[propertiesKey] === \"object\") {\n        const propertiesData = item[propertiesKey];\n        delete item[propertiesKey];\n        flattenObject(item);\n        for (const key in propertiesData) {\n          if (propertiesData.hasOwnProperty(key)) {\n            const value = propertiesData[key];\n            flattenedData.push({\n              [propertiesKey + \"_\" + key]: value\n            });\n          }\n        }\n      } else {\n        flattenObject(item);\n      }\n    });\n  } else if (typeof jsonData === \"object\") {\n    // Single JSON object\n    if (jsonData.hasOwnProperty(propertiesKey) && typeof jsonData[propertiesKey] === \"object\") {\n      const propertiesData = jsonData[propertiesKey];\n      delete jsonData[propertiesKey];\n      flattenObject(jsonData);\n      for (const key in propertiesData) {\n        if (propertiesData.hasOwnProperty(key)) {\n          const value = propertiesData[key];\n          flattenedData.push({\n            [propertiesKey + \"_\" + key]: value\n          });\n        }\n      }\n    } else {\n      flattenObject(jsonData);\n    }\n  }\n  return flattenedData;\n}\nexport function flattenJSONColumns(data, renamedHeaders) {\n  const flattenedData = [];\n  data.forEach(row => {\n    const newRow = {};\n    for (const header in row) {\n      if (row.hasOwnProperty(header)) {\n        const value = row[header];\n        if (typeof value === \"object\" && value !== null) {\n          const flattenedObject = flattenObject(value, header + \".\");\n          Object.assign(newRow, flattenedObject);\n        } else {\n          const newHeader = renamedHeaders[header] || header;\n          newRow[newHeader] = value;\n        }\n      }\n    }\n    flattenedData.push(newRow);\n  });\n  return flattenedData;\n}\n\n// Helper function to flatten nested objects in `flattenJSONColumns`\nfunction flattenObject(obj, prefix = \"\") {\n  const flattenedObject = {};\n  for (const key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      const value = obj[key];\n      if (typeof value === \"object\" && value !== null) {\n        const nestedKeys = flattenObject(value, prefix + key + \".\");\n        Object.assign(flattenedObject, nestedKeys);\n      } else {\n        const newKey = prefix + key;\n        flattenedObject[newKey] = value;\n      }\n    }\n  }\n  return flattenedObject;\n}","map":{"version":3,"names":["flattenJSON","jsonData","propertiesKey","flattenedData","flattenObject","obj","prefix","key","hasOwnProperty","value","Array","isArray","forEach","item","index","newKey","push","propertiesData","flattenJSONColumns","data","renamedHeaders","row","newRow","header","flattenedObject","Object","assign","newHeader","nestedKeys"],"sources":["/Users/robvance/Documents/GitHub/CSViewer/src/utils.js"],"sourcesContent":["// utils.js\nexport function flattenJSON(jsonData, propertiesKey = \"PROPERTIES\") {\n  const flattenedData = [];\n\n  function flattenObject(obj, prefix = \"\") {\n    for (const key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        const value = obj[key];\n        if (typeof value === \"object\" && value !== null && !Array.isArray(value)) {\n          flattenObject(value, prefix + key + \"_\"); // Use underscore as the separator\n        } else if (Array.isArray(value)) {\n          // Handle arrays\n          value.forEach((item, index) => {\n            if (typeof item === \"object\" && item !== null) {\n              flattenObject(item, `${prefix}${key}[${index}]_`);\n            } else {\n              const newKey = `${prefix}${key}[${index}]`;\n              flattenedData.push({ [newKey]: item });\n            }\n          });\n        } else {\n          const newKey = prefix + key;\n          flattenedData.push({ [newKey]: value });\n        }\n      }\n    }\n  }\n\n  if (Array.isArray(jsonData)) {\n    jsonData.forEach((item) => {\n      if (item.hasOwnProperty(propertiesKey) && typeof item[propertiesKey] === \"object\") {\n        const propertiesData = item[propertiesKey];\n        delete item[propertiesKey];\n        flattenObject(item);\n        for (const key in propertiesData) {\n          if (propertiesData.hasOwnProperty(key)) {\n            const value = propertiesData[key];\n            flattenedData.push({ [propertiesKey + \"_\" + key]: value });\n          }\n        }\n      } else {\n        flattenObject(item);\n      }\n    });\n  } else if (typeof jsonData === \"object\") {\n    // Single JSON object\n    if (jsonData.hasOwnProperty(propertiesKey) && typeof jsonData[propertiesKey] === \"object\") {\n      const propertiesData = jsonData[propertiesKey];\n      delete jsonData[propertiesKey];\n      flattenObject(jsonData);\n      for (const key in propertiesData) {\n        if (propertiesData.hasOwnProperty(key)) {\n          const value = propertiesData[key];\n          flattenedData.push({ [propertiesKey + \"_\" + key]: value });\n        }\n      }\n    } else {\n      flattenObject(jsonData);\n    }\n  }\n\n  return flattenedData;\n}\n\nexport function flattenJSONColumns(data, renamedHeaders) {\n  const flattenedData = [];\n\n  data.forEach((row) => {\n    const newRow = {};\n    for (const header in row) {\n      if (row.hasOwnProperty(header)) {\n        const value = row[header];\n        if (typeof value === \"object\" && value !== null) {\n          const flattenedObject = flattenObject(value, header + \".\");\n          Object.assign(newRow, flattenedObject);\n        } else {\n          const newHeader = renamedHeaders[header] || header;\n          newRow[newHeader] = value;\n        }\n      }\n    }\n    flattenedData.push(newRow);\n  });\n\n  return flattenedData;\n}\n\n// Helper function to flatten nested objects in `flattenJSONColumns`\nfunction flattenObject(obj, prefix = \"\") {\n  const flattenedObject = {};\n\n  for (const key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      const value = obj[key];\n      if (typeof value === \"object\" && value !== null) {\n        const nestedKeys = flattenObject(value, prefix + key + \".\");\n        Object.assign(flattenedObject, nestedKeys);\n      } else {\n        const newKey = prefix + key;\n        flattenedObject[newKey] = value;\n      }\n    }\n  }\n\n  return flattenedObject;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}